---
import Layout from '@layouts/Layout.astro';
import { client } from '@utils/types';

export const prerender = false

var notes: { id: number; content: string, title: string }[] = [];

try {
		let url = client.api.notes.$url() // Log the URL to verify it's correct
		console.log("Fetching notes from URL:", url.toString())
    const res = await client.api.notes.$get().then((r) => {
			console.log("Fetched notes:", r)
			return r
		})
    if (res.ok) {
        notes = await res.json();
    }
} catch (error) {
    console.error('Error fetching notes:', error);
}
---

<Layout>
	<ul>
		{notes.map((note) => (
			<li>{note.title}</li>
		))}
	</ul>
</Layout>
