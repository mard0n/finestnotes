---
import { createServerClient } from "@utils/api";
import { parseResponse } from "hono/client";
import NotesComponent from "@components/Notes.tsx";
import Layout from "@layouts/Layout.astro";

if (!Astro.locals.user) {
  return Astro.redirect("/login");
}

const res = await createServerClient(
  Astro.request.headers,
).api.collections.$get();

const collections = await parseResponse(res);
---

<Layout>
  <Fragment slot="navbar"></Fragment>
  <NotesComponent client:load collections={collections} user={Astro.locals.user} />
  <style>
    body {
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
  </style>
</Layout>
